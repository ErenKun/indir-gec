<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ latest_version.version_number if latest_version else "Video İndirici" }} - Hızlı ve Ücretsiz</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* Varsayılan (Açık Tema) */
        :root {
            --bg-primary: #ffffff;
            --text-primary: #1f2937; /* Koyu Gri */
            --accent-color: #ef4444; /* Kırmızı Vurgu Rengi */
        }
        /* Koyu Tema */
        html.dark {
            --bg-primary: #111827; /* Koyu Mavi/Siyah */
            --text-primary: #f3f4f6;
            --accent-color: #fca5a5; /* Açık Kırmızı Vurgu */
        }
        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            /* 5. Yumuşak Geçiş Animasyonu */
            transition: background-color 0.5s, color 0.5s; 
        }
        /* Dinamik renk kullanımı */
        .text-accent-color { color: var(--accent-color); }
        .bg-accent-color { background-color: var(--accent-color); }
    </style>
</head>

<body class="antialiased">
    
    <header class="p-4 flex justify-between items-center sticky top-0 z-50 bg-white/90 dark:bg-gray-900/90 shadow-md backdrop-blur-sm">
        <h1 class="text-2xl font-bold text-gray-800 dark:text-gray-100">VideoİndiriciPro</h1>
        <nav class="space-x-4 hidden md:flex">
            <a href="#tanitim" class="hover:text-red-500 transition duration-300">Tanıtım</a>
            <a href="#guncellemeler" class="hover:text-red-500 transition duration-300">Güncellemeler (2)</a>
            <a href="#durum" class="hover:text-red-500 transition duration-300">Hizmet Durumu (4)</a>
            <a href="#feedback" class="hover:text-red-500 transition duration-300">Geri Bildirim (9)</a>
            <a href="{{ url_for('admin_dashboard') }}" class="hover:text-red-500 transition duration-300">Admin Girişi</a>
        </nav>
        <button id="theme-toggle" class="p-2 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-100 transition duration-300 shadow-inner">
            ☀️ / 🌙
        </button>
    </header>

    <main class="container mx-auto p-4">
        
        <section id="tanitim" class="py-20 text-center">
            <h2 class="text-5xl font-extrabold mb-4 opacity-0 translate-y-10 transition duration-700">
                Hızı ve Kaliteyi Birleştiren <span class="text-accent-color">Tek İndirme Programı</span>
            </h2>
            <p class="text-xl text-gray-600 dark:text-gray-400 mb-8 max-w-2xl mx-auto opacity-0 translate-y-10 transition duration-700 delay-150">
                Tüm favori videolarınızı en yüksek kalitede, tamamen **ücretsiz** ve **hızlı** bir şekilde bilgisayarınıza indirin.
            </p>
            
            <a href="{{ url_for('download_file') }}" class="inline-block px-12 py-4 text-white text-2xl font-bold rounded-full shadow-lg transform hover:scale-105 transition duration-300 bg-accent-color opacity-0 translate-y-10 transition duration-700 delay-300">
                Şimdi Ücretsiz İndir (v{{ latest_version.version_number if latest_version else 'YOK' }})
            </a>
            <p class="mt-4 text-sm text-gray-500 dark:text-gray-400 opacity-0 translate-y-10 transition duration-700 delay-500">
                Windows/macOS uyumlu. Kurulum gerekmez.
            </p>
        </section>

        <section id="durum" class="mt-16 p-6 bg-gray-100 dark:bg-gray-800 rounded-lg shadow-inner text-center">
            <h3 class="text-2xl font-semibold mb-3">Uygulama Hizmet Durumu</h3>
            {% if latest_version and latest_version.is_active %}
                <p id="service-status" class="text-lg font-medium">
                    <span class="text-green-600 dark:text-green-400">✅</span> En Son Sürüm Sorunsuz Çalışıyor.
                </p>
            {% else %}
                <p id="service-status" class="text-lg font-medium">
                    <span class="text-red-600 dark:text-red-400">❌</span> Güncel Sürümde Bakım Var VEYA Aktif Sürüm Yok.
                </p>
            {% endif %}
            <p class="text-sm text-gray-500 dark:text-gray-400 mt-2">
                Son Kontrol: <span id="last-check">{{ latest_version.release_date.strftime('%d %B %Y') if latest_version else 'Bilinmiyor' }}</span>
            </p>
        </section>

        <section id="guncellemeler" class="py-16">
            <h3 class="text-4xl font-bold text-center mb-10">Son Güncellemeler ve Yama Notları</h3>
            
            <div class="space-y-8 max-w-4xl mx-auto">
                {% for version in all_versions %}
                <div class="p-6 border-l-4 border-accent-color shadow-lg bg-white dark:bg-gray-700 rounded-lg transition transform hover:scale-[1.01] duration-300">
                    <h4 class="text-2xl font-semibold mb-2">Sürüm v{{ version.version_number }} Yayınlandı! ({{ version.release_date.strftime('%d %B %Y') }})</h4>
                    <div class="prose dark:prose-invert max-w-none text-gray-700 dark:text-gray-300 mt-4">
                        {{ version.patch_notes | safe }}
                    </div>
                    <p class="mt-4 text-sm text-gray-500 dark:text-gray-400">Bu sürüm **{{ version.download_count }}** kez indirildi.
                        {% if version.is_active %}
                            <span class="text-green-500 font-bold ml-2">(Aktif Sürüm)</span>
                        {% endif %}
                    </p>
                </div>
                {% else %}
                <p class="text-center text-xl text-gray-500">Henüz yayınlanmış bir sürüm bulunmamaktadır.</p>
                {% endfor %}
            </div>
        </section>
        
<section id="feedback" class="py-16 max-w-2xl mx-auto">
    <h3 class="text-3xl font-bold text-center mb-8">Sorun Bildirimi / Geri Bildirim (9)</h3>
    
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="mb-4 space-y-2">
                {% for category, message in messages %}
                    <p class="p-3 rounded-md text-sm {% if category == 'error' %}bg-red-100 text-red-700 border-l-4 border-red-500{% elif category == 'success' %}bg-green-100 text-green-700 border-l-4 border-green-500{% endif %}">
                        {{ message }}
                    </p>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <form method="POST" action="{{ url_for('submit_feedback') }}" class="bg-gray-100 dark:bg-gray-800 p-8 rounded-lg shadow-2xl"> 
        <div class="mb-4">
            <label for="email" class="block mb-2 font-medium">E-posta (İsteğe Bağlı)</label>
            <input type="email" id="email" name="email" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-red-500 focus:border-red-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200">
        </div>
        <div class="mb-4">
            <label for="message" class="block mb-2 font-medium">Mesajınız</label>
            <textarea id="message" name="message" rows="4" required class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-red-500 focus:border-red-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200"></textarea>
        </div>
        <button type="submit" class="w-full py-3 text-white font-semibold rounded-md transform hover:scale-[1.01] transition duration-300 bg-accent-color">
            Geri Bildirim Gönder
        </button>
    </form>
</section>

    </main>
    
    <footer class="p-8 mt-10 text-center border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50">
        <p>© 2025 VideoİndiriciPro. Tüm hakları saklıdır.</p>
        <p class="mt-2 text-sm">
            <a href="#" id="admin-info-link" class="hover:underline">Admin Bilgisi (8)</a> | 
            <a href="#" class="hover:underline">Gizlilik Politikası</a>
        </p>
    </footer>

    <script>
        // --- Tema Değiştirme (Koyu/Açık) ---
        function applyTheme(theme) {
            if (theme === 'dark') {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        }

        // Sayfa yüklendiğinde tercihi kontrol et
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            applyTheme(savedTheme);
        } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
            // Kayıt yoksa sistem temasını kullan
            applyTheme('dark');
        }

        document.getElementById('theme-toggle').addEventListener('click', function() {
            const isDark = document.documentElement.classList.toggle('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        });
        
        // --- 5. Kaydırma Animasyonları (Gelişmiş CSS Sınıfı Ekleme) ---
        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.remove('opacity-0', 'translate-y-10');
                    // Gözlemlemeyi bırak ki bir kere çalışsın ve performans artsın
                    observer.unobserve(entry.target); 
                }
            });
        }, { threshold: 0.1 }); // %10'u görünürse tetikle

        // Animasyon uygulanacak tüm ana bölümleri seç
        document.querySelectorAll('section').forEach(element => {
            // HTML'de manuel verdiğimiz animasyon sınıfları (opacity-0, translate-y-10) kaldırılır
            observer.observe(element);
        });
        
        // Admin Bilgisi Linki (8) - İleride bir pop-up veya ayrı sayfaya bağlanabilir
        document.getElementById('admin-info-link').addEventListener('click', function(e) {
            e.preventDefault();
            alert("Admin Bilgisi: Proje, [Admin Adı] tarafından geliştirilmiştir. İletişim: [E-posta Adresi]. Bu sayfa ileride detaylı bir sayfa haline getirilecektir.");
        });

    </script>
</body>
</html>